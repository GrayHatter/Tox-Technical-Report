\documentclass{tox}

\begin{document}

\title{A secure, distributed multimedia messenger}

\abstract{\
  \textbf{Abstract}:
Tox is a secure, lightweight, distributed messenger platform designed to 
provide maximum security without penalizing performance.
}

\author{Written by irungentoo} %add your name here when you contribute to it.

\maketitle

\section{Introduction}

When one first starts a Tox client, a long term asymmetric keypair is created. 
This keypair identifies the user uniquely. If a Tox user wants to connect to 
another user, he needs to obtain their long term public key. 

\subsection{Crypto}

Tox uses crypto\_box() from the NaCl crypto library for all the cryptography in 
Tox. Unless otherwise noted, all keys refer to keys generated with 
crypto\_box\_keypair(), all encryption is done with crypto\_box() and all 
decryption with crypto\_box\_open(). For performance purposes the functions to 
precomputed the shared secret and encrypt and decrypt messages with it are used 
extensively in Tox however this is not relevant to this document.

crypto\_box() provides fast public-key authenticated encryption. For exactly 
how it works read the NaCl docs.

\subsection{Tox ID}

What is referred to as the Tox ID is in fact the long term public key of that 
Tox user with a nospam value and a checksum appended to it. The exact format is:

[NaCl crypto\_box() public key (32 bytes)][nospam (4 bytes)][checksum (2 bytes)]

The Tox ID is 38 bytes and usually distributed in hex format. A typical valid 
Tox ID looks like:

56A1ADE4B65B86BCD51CC73E2CD4E542179F47959FE3E0E21B4B0ACDADE51855D34D34D37CB5

The nospam value is there to permit users from quickly changing their Tox ids 
without changing identities. How it works is explained later in the friend 
request section.

The checksum is a checksum to prevent users from adding mistyped or badly 
copied Tox IDs. It is a simple XOR checksum. Code to compute the checksum from 
a partial ID of ID\_length follows.

\begin{lstlisting}
uint8_t checksum[2] = {0};
uint32_t i;

for (i = 0; i < ID_length; ++i)
    checksum[i % 2] ^= ID[i];

\end{lstlisting}

\end{document}
